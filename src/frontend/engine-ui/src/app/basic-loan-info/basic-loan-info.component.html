<!-- basic-loan-info.component.html -->
<!-- Basic Loan Info Tab Content -->
<form>
  <div class="grid">
    <div class="col-12">
      <p-card header="Loan Details">
        <div class="grid p-fluid">
          <!-- Principal Amount -->
          <div class="field col-6">
            <label for="principal">
              Principal Amount
              <i
                class="pi pi-info-circle tooltip-icon"
                (click)="showTooltip($event, principalTooltip)"
              ></i>
            </label>
            <p-inputNumber
              id="principal"
              [(ngModel)]="loan.principal"
              name="principal"
              mode="currency"
              currency="USD"
              locale="en-US"
              (ngModelChange)="submitLoan()"
            ></p-inputNumber>
            <!-- Tooltip Overlay -->
            <p-overlayPanel #principalTooltip>
              The initial amount of the loan. E.g., $100,000
            </p-overlayPanel>
          </div>

          <!-- Origination Fee -->
          <div class="field col-6">
            <label for="originationFee">
              Origination Fee
              <i
                class="pi pi-info-circle tooltip-icon"
                (click)="showTooltip($event, originationFeeTooltip)"
              ></i>
            </label>
            <p-inputNumber
              id="originationFee"
              [(ngModel)]="loan.originationFee"
              name="originationFee"
              mode="currency"
              currency="USD"
              locale="en-US"
              (ngModelChange)="submitLoan()"
            ></p-inputNumber>
            <!-- Tooltip Overlay -->
            <p-overlayPanel #originationFeeTooltip>
              The fee charged by the lender for processing the loan. E.g.,
              $1,000
            </p-overlayPanel>
          </div>

          <!-- Interest Rate (%) -->
          <div class="field col-6">
            <label for="interestRate">
              Interest Rate (%)
              <i
                class="pi pi-info-circle tooltip-icon"
                (click)="showTooltip($event, interestRateTooltip)"
              ></i>
            </label>
            <p-inputNumber
              id="interestRate"
              [(ngModel)]="loan.interestRate"
              name="interestRate"
              mode="decimal"
              minFractionDigits="2"
              suffix="%"
              (ngModelChange)="submitLoan()"
            ></p-inputNumber>
            <!-- Tooltip Overlay -->
            <p-overlayPanel #interestRateTooltip>
              Annual interest rate for the loan. E.g., 5%
            </p-overlayPanel>
          </div>

          <!-- Term (Months) -->
          <div class="field col-6">
            <label for="term">
              Term ({{ amortization?.loanTermInMonths }} months)
              <i
                class="pi pi-info-circle tooltip-icon"
                (click)="showTooltip($event, termTooltip)"
              ></i>
            </label>
            <p-inputNumber
              id="term"
              [(ngModel)]="loan.term"
              name="term"
              (ngModelChange)="updateTerm()"
            ></p-inputNumber>
            <!-- Tooltip Overlay -->
            <p-overlayPanel #termTooltip>
              Number of periods for the loan term. E.g., 12
            </p-overlayPanel>
          </div>

          <!-- Start Date -->
          <div class="field col-4">
            <label for="startDate">
              Start Date
              <i
                class="pi pi-info-circle tooltip-icon"
                (click)="showTooltip($event, startDateTooltip)"
              ></i>
            </label>
            <p-calendar
              id="startDate"
              [(ngModel)]="loan.startDate"
              name="startDate"
              dateFormat="mm/dd/yy"
              [numberOfMonths]="2"
              [showButtonBar]="true"
              showIcon
              (ngModelChange)="updateStartDate()"
            ></p-calendar>
            <!-- Tooltip Overlay -->
            <p-overlayPanel #startDateTooltip>
              The date when the loan starts. E.g., 01/01/2024
            </p-overlayPanel>
          </div>

          <!-- First Payment Date (with checkbox) -->
          <div class="field col-4">
            <label
              >First Payment Date
              <i
                class="pi pi-info-circle tooltip-icon p-ml-2"
                (click)="showTooltip($event, firstPaymentDateTooltip)"
              ></i
            ></label>
            <div class="p-inputgroup">
              <span class="p-inputgroup-addon">
                <p-checkbox
                  [(ngModel)]="enableFirstPaymentDate"
                  binary="true"
                  inputId="enableFirstPaymentDate"
                  (onChange)="onFirstPaymentToggle()"
                ></p-checkbox>
                <label for="enableFirstPaymentDate" class="p-ml-2">
                  Enable
                </label>
              </span>

              <p-calendar
                id="firstPaymentDate"
                [(ngModel)]="loan.firstPaymentDate"
                name="firstPaymentDate"
                dateFormat="mm/dd/yy"
                [numberOfMonths]="2"
                [showButtonBar]="true"
                showIcon
                (ngModelChange)="submitLoan()"
                [disabled]="!enableFirstPaymentDate"
              >
              </p-calendar>
              <p-overlayPanel #firstPaymentDateTooltip>
                The date of the first payment. E.g., 02/01/2024
              </p-overlayPanel>
            </div>
          </div>

          <!-- End Date (with checkbox) -->
          <div class="field col-4">
            <label
              >End Date
              <i
                class="pi pi-info-circle tooltip-icon p-ml-2"
                (click)="showTooltip($event, endDateTooltip)"
              ></i>
            </label>
            <p-inputgroup>
              <p-inputgroup-addon>
                <p-checkbox
                  [(ngModel)]="enableEndDate"
                  binary="true"
                  inputId="enableEndDate"
                  (onChange)="onEndDateToggle()"
                ></p-checkbox>
              </p-inputgroup-addon>

              <p-calendar
                id="endDate"
                [(ngModel)]="loan.endDate"
                name="endDate"
                dateFormat="mm/dd/yy"
                showIcon
                [numberOfMonths]="2"
                [showButtonBar]="true"
                (ngModelChange)="submitLoan()"
                [disabled]="!enableEndDate"
              >
              </p-calendar>
              <p-overlayPanel #endDateTooltip>
                The date when the loan ends. Calculated automatically if not
                set.
              </p-overlayPanel>
            </p-inputgroup>
          </div>
        </div>
      </p-card>
    </div>
  </div>
</form>
